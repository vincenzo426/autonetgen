
resource "google_compute_instance" "host_224_0_0_22" {
  name         = "host-224_0_0_22"
  machine_type = "e2-medium"
  zone         = "us-central1-a"
  tags         = ["ssh", "server", "224_0_0_22"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-2.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

  EOT

  metadata = {
    role = "SERVER"
    original_ip = "224.0.0.22"
  }
}

resource "google_compute_instance" "host_185_175_0_8" {
  name         = "host-185_175_0_8"
  machine_type = "e2-micro"
  zone         = "us-central1-a"
  tags         = ["ssh", "185_175_0_8"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-1.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

  EOT

  metadata = {
    role = "GATEWAY"
    original_ip = "185.175.0.8"
  }
}

resource "google_compute_instance" "host_185_175_0_3" {
  name         = "host-185_175_0_3"
  machine_type = "e2-micro"
  zone         = "us-central1-a"
  tags         = ["ssh", "185_175_0_3"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-1.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

  EOT

  metadata = {
    role = "CLIENT"
    original_ip = "185.175.0.3"
  }
}

resource "google_compute_instance" "host_185_175_0_1" {
  name         = "host-185_175_0_1"
  machine_type = "e2-micro"
  zone         = "us-central1-a"
  tags         = ["ssh", "185_175_0_1"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-1.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

  EOT

  metadata = {
    role = "CLIENT"
    original_ip = "185.175.0.1"
  }
}

resource "google_compute_instance" "host_185_175_0_5" {
  name         = "host-185_175_0_5"
  machine_type = "e2-micro"
  zone         = "us-central1-a"
  tags         = ["ssh", "plc", "185_175_0_5"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-1.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

                    apt-get update
                    apt-get install -y python3-pip
                    pip3 install pymodbus
                    # Script per emulare un PLC Modbus
                    cat <<EOF > /usr/local/bin/modbus_emulator.py
#!/usr/bin/env python3
from pymodbus.server.sync import StartTcpServer
from pymodbus.datastore import ModbusSequentialDataBlock, ModbusSlaveContext, ModbusServerContext
import logging
import time

logging.basicConfig()
log = logging.getLogger()
log.setLevel(logging.DEBUG)

# Configurazione del contesto del server
store = ModbusSlaveContext(
    di=ModbusSequentialDataBlock(0, [0]*100),
    co=ModbusSequentialDataBlock(0, [0]*100),
    hr=ModbusSequentialDataBlock(0, [0]*100),
    ir=ModbusSequentialDataBlock(0, [0]*100))
context = ModbusServerContext(slaves=store, single=True)

# Avvia il server
print("Avvio server Modbus TCP su porta 502")
StartTcpServer(context, address=("0.0.0.0", 502))
EOF
                    chmod +x /usr/local/bin/modbus_emulator.py
                    nohup /usr/local/bin/modbus_emulator.py &
                    
  EOT

  metadata = {
    role = "PLC_MODBUS"
    original_ip = "185.175.0.5"
  }
}

resource "google_compute_instance" "host_185_175_0_4" {
  name         = "host-185_175_0_4"
  machine_type = "e2-micro"
  zone         = "us-central1-a"
  tags         = ["ssh", "185_175_0_4"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-1.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

  EOT

  metadata = {
    role = "GATEWAY"
    original_ip = "185.175.0.4"
  }
}

resource "google_compute_instance" "host_185_175_0_6" {
  name         = "host-185_175_0_6"
  machine_type = "e2-micro"
  zone         = "us-central1-a"
  tags         = ["ssh", "185_175_0_6"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-1.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

  EOT

  metadata = {
    role = "GATEWAY"
    original_ip = "185.175.0.6"
  }
}

resource "google_compute_instance" "host_224_0_0_251" {
  name         = "host-224_0_0_251"
  machine_type = "e2-medium"
  zone         = "us-central1-a"
  tags         = ["ssh", "server", "224_0_0_251"]

  boot_disk {
    initialize_params {
      image = "debian-cloud/debian-11"
    }
  }

  network_interface {
    network    = google_compute_network.main_network.name
    subnetwork = google_compute_subnetwork.subnet-2.name
    
    access_config {
      // Ephemeral IP
    }
  }

  metadata_startup_script = <<-EOT

  EOT

  metadata = {
    role = "SERVER"
    original_ip = "224.0.0.251"
  }
}

resource "google_compute_firewall" "allow-185_175_0_8-ports" {
  name    = "allow-185_175_0_8-ports"
  network = google_compute_network.main_network.name

  allow {
    protocol = "tcp"
    ports    = ["60638", "59980", "59236", "60114", "60136", "58578", "60270", "59130", "59874", "58734", "58868", "58472", "58366", "60444", "59438", "59198", "60820", "58936", "60076", "60232", "59836", "58696", "58674", "58830", "59574", "58434", "60474", "59334", "58328", "60406", "60144", "60300", "59160", "59904", "60782", "58898", "59798", "59402", "58658", "59932", "59536", "58396", "59034", "60368", "60106", "58966", "60262", "59866", "60000", "58860", "58464", "60744", "60504", "59364", "58598", "58620", "59760", "59102", "58358", "58996", "60330", "60812", "59672", "59828", "60706", "59566", "60466", "59326", "58560", "59304", "60204", "59460", "59064", "58802", "60030", "60774", "58890", "59634", "59768", "60534", "60668", "59528", "58388", "59132", "59662", "59288", "59266", "59422", "60098", "60736", "60870", "59730", "58590", "60630", "59490", "59094", "58350", "59228", "58832", "60128", "58988", "59122", "60060", "59558", "60832", "60458", "59296", "59692", "60592", "59452", "59056", "60436", "59934", "59190", "58794", "60090", "58950", "58532", "59084", "58688", "60766", "59520", "60264", "60398", "60420", "59258", "60554", "59414", "60158", "59018", "59152", "58756", "59656", "58516", "58494", "58650", "60728", "60622", "59220", "58824", "59964", "60120", "58980", "58958", "60254", "60516", "58718", "60758", "59618", "58456", "58852", "59752", "58612", "59356", "58478", "60584", "60188", "60322", "59926", "58786", "60082", "58920", "59686", "60216", "59820", "58680", "58418", "59714", "59318", "58574", "58312", "60390", "59250", "60546", "60284", "59144", "58748", "59888", "60788", "60044", "60022", "59648", "59782", "59386", "58642", "58882", "59626", "58380", "59280", "60352", "59956", "60246", "59850", "60750", "58844", "58448", "59588", "59744", "58604", "60884", "59348", "59984", "59086", "58342", "58582", "60488", "59482", "60314", "59918", "60052", "58912", "60818", "59812", "60690", "59550", "59706", "59310", "58544", "60450", "59444", "58566", "58942", "59880", "60014", "58874", "60518", "59774", "59378", "60652", "59512", "59116", "58372", "60412", "59272", "59406", "59010", "58904", "60720", "59736", "59340", "60614", "60218", "59078", "58334", "60374", "59474", "58838", "58816", "59368", "58972", "60112", "59234", "59212", "58470", "60548", "60682", "59542", "60838", "60442", "60180", "59040", "59174", "58800", "58778", "59940", "58934", "58538", "59572", "58432", "60510", "60644", "60248", "59108", "60800", "60382", "59242", "60538", "59398", "60142", "59002", "59902", "59136", "58740", "60036", "59640", "58500", "58634", "60868", "60606", "59466", "59070", "60210", "60344", "59204", "59970", "60104", "58964", "58568", "59098", "58702", "59842", "60742", "58858", "59998", "58462", "60674", "60568", "59428", "60172", "60328", "59910", "59166", "60306", "60810", "58926", "58530", "58770", "59804", "60066", "60704", "59564", "58424", "58402", "58558", "60636", "60134", "60268", "59128", "59872", "58732", "60028", "58888", "59632", "58866", "59766", "58626", "60772", "59370", "59526", "58364", "58386", "58520", "59264", "60598", "60336", "59196", "60096", "59700", "60840", "59834", "59990", "60734", "58850", "59728", "59332", "58588", "58326", "59092", "59226", "60298", "60802", "60058", "59796", "59400", "60540", "59952", "59556", "58394", "59534", "60434", "60696", "58656", "59294", "59690", "59032", "59188", "58792", "59864", "60020", "60898", "60502", "59758", "58618", "59362", "59496", "59100", "59518", "59652", "58356", "60658", "58994", "59894", "58492", "59982", "60860", "59720", "58580", "59324", "60464", "60202", "59458", "58318", "59062", "59218", "60358", "60224", "58822", "58956", "59856", "58454", "59788", "60532", "60688", "60822", "59682", "60426", "59420", "59024", "60164", "60320", "59180", "58784", "59924", "60186", "58918", "58416", "60494", "59750", "60628", "60650", "58348", "60388", "59248", "59382", "58986", "60282", "59886", "59142", "58724", "59624", "58484", "58880", "58378", "60852", "59450", "60194", "60350", "59210", "59954", "60088", "58948", "58552", "58686", "58708", "58842", "58446", "59586", "58340", "60418", "60156", "59016", "60312", "59172", "59916", "59150", "60050", "59654", "59810", "59392", "58670", "58804", "58408", "59548", "59046", "59480", "60380", "60118", "58978", "59722", "60274", "59134", "59878", "60012", "58872", "60756", "58476", "58610", "59376", "59510", "58370", "60582", "60080", "59684", "60824", "58940", "59840", "58834", "58438", "59578", "58572", "59316", "59472", "59076", "58332", "60148", "60304", "60786", "60042", "58902", "59646", "59780", "59384", "58640", "59936", "60680", "60524", "59802", "58400", "58534", "59278", "59540", "58776", "60110", "60748", "58864", "60486", "58602", "59742", "60508", "59502", "58362", "59106", "59346", "59240", "60642", "60140", "59000", "58738", "60816", "60072", "60710", "59570", "60470", "60448", "58564", "60604", "60208", "59068", "59464", "59308", "59202", "58806", "59946", "60034", "60778", "59772", "60672", "59532", "60276", "60806", "59270", "60566", "59426", "60170", "59908", "58768", "58528", "58506", "60740", "59734", "59338", "60478", "60634", "60238", "59494", "60372", "59976", "59232", "60132", "58992", "58970", "60266", "59870", "58468", "58624", "60702", "60836", "60440", "59300", "60596", "60200", "60334", "59194", "58798", "59938", "60094", "58954", "58536", "59676", "59088", "59832", "60228", "58430", "59330", "59764", "60664", "60402", "59262", "60536", "60558", "60162", "60296", "59156", "58760", "59900", "58894", "58498", "59660", "59638", "58654", "59794", "58788", "58392", "60866", "59968", "59224", "60124", "58962", "60102", "60258", "59118", "58722", "59862", "59996", "58856", "58460", "60896", "59756", "59360", "58616", "60500", "58354", "60432", "60326", "59186", "59930", "60830", "60808", "58924", "60064", "59824", "58684", "58818", "59562", "60462", "59456", "58316", "60288", "59892", "60792", "58886", "59630", "60026", "58646", "59390", "58384", "60424", "59284", "59418", "59022", "60872", "59854", "60754", "58452", "60888", "59726", "59352", "58586", "60626", "59486", "59090", "60230", "59748", "58828", "59380", "58984", "58482", "60056", "60560", "60694", "59554", "59158", "58414", "60454", "59314", "59292", "60588", "60192", "59052", "58812", "58790", "60086", "58946", "60018", "59622", "60762", "60522", "60656", "60260", "59120", "58376", "60416", "59276", "59254", "60550", "59410", "59014", "59516", "60154", "59148", "58752", "60048", "58908", "59584", "60618", "59082", "60378", "59960", "60356", "60512", "60116", "58976", "59372", "59110", "58714", "59614", "58474", "58608", "60686", "60290", "60842", "60580", "60184", "59044", "60318", "59178", "58782", "59922", "58542", "59816", "59072", "58676", "58570", "60252", "60386", "59246", "60542", "60146", "59006", "59884", "58744", "60784", "58878", "58504", "59644", "58900", "60040", "58638", "60610", "60214", "60348", "59208", "60108", "60242", "60746", "58862", "58466", "58444", "58840", "59344", "58600", "59740", "58338", "59238", "60572", "60310", "59170", "58774", "59914", "60070", "59674", "60814", "59808", "59412", "58668", "60708", "59568", "59546", "59702", "58562", "59306", "60446", "60272", "59876", "58736", "60776", "58870", "60010", "60032", "59770", "58630", "59374", "59508", "59112", "58368", "59664", "59268", "60408", "58766", "60340", "60844", "59838", "59442", "59972", "60716", "59994", "59576", "60476", "59732", "58592", "59336", "59470", "59096", "59074", "60370", "59230", "58968", "60302", "59800", "59404", "60700", "59538", "60678", "60834", "59694", "58554", "59298", "60438", "60176", "59036", "60332", "59192", "58796", "58930", "58428", "60902", "59762", "59366", "60506", "60662", "59500", "58360", "60796", "59104", "60244", "59394", "58998", "60138", "59898", "58758", "59636", "58892", "58496", "60468", "59724", "60602", "59462", "58322", "59066", "60362", "59222", "58826", "59200", "59966", "58960", "58698", "58458", "60826", "60430", "60564", "59424", "59028", "60168", "60324", "59162", "59906", "59184", "60062", "59666", "58526", "58922", "58660", "59560", "58420", "60632", "59492", "60526", "60130", "58990", "58594", "59146", "59890", "58728", "60768", "59628", "58884", "60024", "58488", "59868", "59522", "60594", "59454", "60198", "60354", "59696", "58556", "59852", "59830", "58690", "59986", "58846", "58450", "59590", "60730", "59328", "60160", "60294", "60316", "60054", "59658", "60798", "58914", "59792", "58652", "59396", "60692", "58808", "58390", "58546", "60190", "60624", "60122", "60278", "59860", "60760", "58876", "59620", "60016", "59754", "59358", "58614", "58374", "58508", "59252", "58750", "1099", "60828", "59822", "58682", "60722", "59716", "60460", "58576", "59320", "60220", "58336", "59058", "59476", "59214", "58314", "59080", "60616", "59784", "58644", "60684", "59544", "59678", "59282", "60422", "60182", "59042", "59176", "58780", "58518", "60008", "60752", "60490", "58606", "60646", "59506", "60250", "60780", "58344", "59244", "60384", "58982", "59004", "59882", "58742", "59138", "58480", "59814", "60714", "60848", "59708", "59312", "60452", "60608", "60212", "59446", "59468", "59206", "58810", "59950", "58944", "58548", "58704", "58442", "59776", "60676", "60414", "59274", "60570", "59430", "59012", "59408", "60308", "59168", "58772", "59912", "60152", "59650", "58510", "58906", "59806", "58666", "58404", "60878", "60482"]
  }

  source_ranges = ["0.0.0.0/0"]
  target_tags   = ["185_175_0_8"]
}

resource "google_compute_firewall" "allow-185_175_0_5-ports" {
  name    = "allow-185_175_0_5-ports"
  network = google_compute_network.main_network.name

  allow {
    protocol = "tcp"
    ports    = ["502"]
  }

  source_ranges = ["0.0.0.0/0"]
  target_tags   = ["185_175_0_5"]
}

resource "google_compute_firewall" "allow-185_175_0_4-ports" {
  name    = "allow-185_175_0_4-ports"
  network = google_compute_network.main_network.name

  allow {
    protocol = "tcp"
    ports    = ["44342", "43946", "45018", "45174", "45152", "44912", "43772", "44516", "44650", "44254", "44672", "45394", "44410", "43510", "44148", "45048", "43908", "43646", "44874", "44478", "45356", "44612", "43472", "45378", "45116", "43976", "44372", "44216", "44110", "43870", "43608", "44942", "44680", "43540", "44440", "45340", "44178", "44574", "45474", "44334", "43938", "45318", "45078", "44816", "44072", "43676", "43570", "44448", "44904", "44642", "43502", "44402", "45146", "45280", "44140", "44296", "43878", "45040", "43900", "44034", "43638", "44778", "43532", "44604", "44208", "45348", "45108", "45242", "44846", "43706", "45002", "43840", "43996", "43600", "44740", "45310", "44170", "45466", "44326", "45070", "44304", "45204", "44808", "44064", "43668", "44546", "43802", "45098", "43958", "43562", "44702", "44200", "44634", "45272", "44876", "44132", "45428", "45010", "44288", "45032", "45166", "44026", "44770", "43630", "43764", "44530", "44508", "44664", "43524", "45496", "45234", "44838", "44094", "44994", "43832", "44972", "45128", "43988", "43592", "44732", "44470", "44626", "44230", "45370", "43486", "45302", "45196", "44056", "44800", "44956", "44538", "43794", "44934", "44694", "43554", "44432", "45332", "43930", "45264", "45158", "44762", "44896", "43756", "44500", "45400", "43516", "44656", "43494", "44394", "43998", "44260", "44154", "43892", "45226", "43824", "44724", "44462", "44618", "43478", "44222", "45362", "44356", "43960", "43698", "43854", "44926", "43786", "45430", "44424", "44028", "44580", "44162", "44184", "45458", "45062", "43922", "45324", "44318", "43660", "43816", "44888", "44492", "45392", "44648", "45130", "43990", "44386", "45286", "44146", "44124", "45420", "43728", "44280", "43884", "45024", "43622", "44454", "45354", "44588", "45488", "44348", "43952", "45092", "44830", "43690", "45382", "44242", "43846", "44986", "44086", "43980", "43584", "44484", "44918", "44416", "45160", "45294", "45316", "45450", "45054", "44310", "44814", "43652", "44792", "43808", "43546", "45122", "44378", "45256", "44116", "45412", "45016", "43876", "45150", "44010", "44754", "43614", "44910", "44514", "43770", "43508", "44252", "45480", "45084", "45218", "44822", "43682", "44078", "44978", "44582", "43838", "45112", "44716", "43576", "43710", "44476", "44610", "44214", "43470", "45442", "45046", "45180", "44040", "43644", "44784", "44940", "44544", "43778", "44678", "44282", "43538", "44438", "44572", "44176", "45248", "44108", "45142", "44746", "43606", "44880", "44506", "43740", "44902", "45384", "43500", "44640", "44244", "43982", "44534", "44138", "45278", "45210", "44708", "43568", "44312", "44864", "44468", "44446", "44842", "45346", "44206", "44602", "43944", "45240", "44100", "45172", "44776", "45414", "44274", "44670", "44408", "44564", "44168", "45308", "44302", "43906", "44806", "43666", "43800", "44738", "44632", "44236", "45376", "45136", "43974", "45114", "45270", "44370", "44130", "44264", "43868", "45008", "44768", "43628", "43762", "45444", "44594", "44198", "45472", "44332", "43936", "45076", "45232", "44092", "43696", "44836", "44970", "43830", "43724", "45406", "44400", "45300", "45434", "44294", "45038", "43898", "45194", "44798", "43658", "43636", "44932", "43792", "44536", "44032", "44054", "43530", "44430", "45106", "43966", "44362", "45262", "44866", "45396", "45000", "43860", "44760", "43994", "43598", "44894", "44498", "43754", "43492", "45464", "44324", "43928", "45068", "45224", "44062", "45202", "44828", "44962", "43822", "44566", "44722", "43560", "44700", "44856", "43716", "44460", "45030", "45186", "44024", "45164", "44924", "43784", "44528", "44662", "44266", "43522", "44818", "44160", "45494", "44992", "44596", "45148", "44730", "43590", "44886", "44490", "43746", "44624", "44228", "45368", "43484", "44384", "44122", "43620", "44954", "44558", "44692", "43552", "45436", "44848", "44452", "45330", "44190", "44586", "45090", "43950", "44084", "43688", "44916", "45398", "44654", "43514", "44258", "44414", "44018", "44548", "44152", "45292", "45052", "43912", "43890", "44790", "43650", "44046", "44878", "44616", "43476", "44220", "45360", "44376", "44354", "45120", "45254", "44114", "43718", "43852", "44008", "43612", "44752", "44684", "44578", "44182", "45322", "45478", "45082", "43920", "44316", "45216", "44076", "43680", "45060", "44820", "43814", "44338", "44714", "43574", "44646", "45390", "45284", "44144", "43748", "45044", "43882", "44278", "45178", "44782", "44038", "43642", "45022", "43776", "44520", "44676", "43536", "44608", "45352", "45486", "44346", "44850", "44106", "44984", "43844", "45006", "45140", "44000", "43604", "44744", "43738", "44482", "45314", "45448", "45470", "45208", "44812", "44068", "44946", "44550", "43806", "45102", "44706", "43544", "43566", "43700", "44444", "43942", "45276", "45432", "45014", "43874", "45170", "44030", "44908", "43768", "44512", "44668", "43528", "43506", "44272", "44250", "44406", "43904", "45238", "44976", "43836", "45132", "44870", "43730", "44474", "44234", "43468", "44212", "44368", "43972", "43490", "43866", "45200", "44938", "43798", "44542", "44698", "44832", "44436", "45336", "44196", "44174", "45074", "44330", "43934", "43672", "45162", "44900", "43760", "44504", "44660", "44638", "43498", "45404", "44398", "44002", "44136", "45036", "43896", "44292", "43634", "44466", "45366", "44600", "44204", "44622", "44360", "43964", "45344", "45104", "44098", "43702", "44998", "43858", "43596", "44930", "44428", "45328", "44166", "45306", "45462", "44322", "43926", "45066", "44804", "43664", "44060", "44960", "43820", "43954", "43558", "45134", "44390", "45268", "44128", "43732", "44872", "44284", "43888", "45028", "45424", "45290", "43626", "44766", "44526", "43520", "45492", "44352", "45096", "45230", "44090", "43694", "45386", "44990", "43850", "43828", "45124", "43984", "44728", "43588", "43482", "44226", "45298", "44158", "45454", "45058", "45192", "44052", "43656", "44796", "44952", "43790", "44556", "43812", "44690", "45086", "45260", "44120", "45416", "45020", "45154", "44014", "44758", "43752", "44496", "43774", "44518", "44256", "43512", "44150", "45222", "44082", "44826", "44982", "44720", "43580", "44854", "44480", "43714", "44458", "45358", "43474", "44614", "44218", "43956", "45184", "44788", "44922", "43782", "44682", "43542", "45426", "44420", "44576", "44180", "45320", "44314", "45252", "44750", "44884", "43744", "44488", "45388", "44248", "43504", "44644", "45126", "44382", "43986", "45282", "44142", "44276", "43880", "44712", "45456", "44450", "44584", "44210", "44606", "45484", "45088", "44344", "45350", "45244", "44104", "43708", "43686", "44238", "43948", "44914", "45418", "45156", "44016", "44412", "44568", "45312", "44172", "45446", "44306", "43910", "45050", "44810", "43648", "43670", "44944", "43804", "45380", "44374", "43978", "45274", "45408", "45012", "43872", "44268", "44006", "43632", "43610", "44906", "43766", "44510", "44442", "45342", "45476", "44336", "45080", "43940", "45214", "44074", "44840", "44974", "43834", "43572", "44472", "43466", "45438", "44298", "43902", "45042", "45176", "44780", "45198", "43640", "44802", "44540", "43796", "44674", "43534", "44434", "45110", "45004", "45138", "44742", "43602", "44898", "43758", "44502", "43736", "44636", "44240", "43496", "44134", "45072", "45206", "44966", "44570", "44308", "43564", "44860", "43720", "44598", "44202", "43962", "44096", "45168", "44772", "44928", "44532", "44666", "43526", "44270", "45410", "44426", "44404", "44560", "45304", "44164", "44058", "43662", "44734", "43594", "44868", "44890", "45372", "43488", "44232", "44628", "44366", "43970", "44388", "44522", "44126", "45266", "45460", "43864", "44764", "43624", "45440", "44696", "44300", "44852", "44590", "44194", "45334", "44328", "43932", "45094", "45228", "44088", "43692", "45402", "44262", "44396", "44552", "45296", "44156", "45056", "44290", "43894", "45190", "44050", "43654", "44794", "45034", "43788", "1099", "45364", "44620", "44358", "45258", "44118", "43722", "44996", "43856", "44756", "43616", "43750", "44494", "45326", "45482", "45064", "44320", "43924", "45220", "44824", "44080", "43684", "44958", "43818", "44562", "44718", "43578", "43556", "43712", "44456", "45288", "44892", "45422", "45026", "43886", "45182", "44042", "44786", "44020", "44920", "43780", "44524", "43518", "43674", "44418", "43916", "45490", "44350", "45250", "44988", "44592", "43848", "45144", "44726", "43586", "44004", "44882", "43742", "44486", "44748", "44224", "43480", "44246", "44380", "45452", "45212", "44950", "44554", "43810", "44688", "43548", "43704", "44186"]
  }

  source_ranges = ["0.0.0.0/0"]
  target_tags   = ["185_175_0_4"]
}

resource "google_compute_firewall" "allow-185_175_0_6-ports" {
  name    = "allow-185_175_0_6-ports"
  network = google_compute_network.main_network.name

  allow {
    protocol = "tcp"
    ports    = ["48222", "48198", "43682", "43748", "43710", "43686", "48156", "48200", "48160", "48226", "43734", "48162", "48228", "43740", "43676", "48192", "48152", "48196", "48218", "43730", "43706", "48154", "48220", "43666", "48158", "48180", "48224", "48184", "43668", "43736", "48182", "43762", "48186", "43696", "48188", "43724", "48214", "43726", "43702", "48150", "48216", "48176", "43664", "48178", "43732", "43716", "43692", "48206", "48274", "48210", "43694", "48208", "43678", "1099", "43698", "48168", "48146", "48234", "48212", "48172", "43746", "43722", "48170", "43750", "48174", "43684", "43752", "43728", "43712", "43688", "48202", "43714", "43690", "48204", "43674", "48164", "48230", "43742", "43718", "48166", "48232", "43744", "43704", "43680"]
  }

  source_ranges = ["0.0.0.0/0"]
  target_tags   = ["185_175_0_6"]
}

resource "google_compute_firewall" "allow-224_0_0_251-ports" {
  name    = "allow-224_0_0_251-ports"
  network = google_compute_network.main_network.name

  allow {
    protocol = "udp"
    ports    = ["5353"]
  }

  source_ranges = ["0.0.0.0/0"]
  target_tags   = ["224_0_0_251"]
}
